*** 
## Инструкция по эксплуатации телеграм-бота.
***
### Инфо телеграм-бот по закупкам.

***
### Перечень файлов проекта и краткое описание.
***
### Файлы в корне проекта:

1. __.env.template__ - образец файла .env с описанием данных.
2. __.env__ - необходимо создать вручную и поместить Токен телеграм-бота.
3. __loading.py__ - создаёт экземпляры: телеграмм-бота и логгера.
4. __logging_config.py__ - задаёт конфигурацию логгеру.
5. __main.py__ - запускает бота.
6. __readme.md__ - инструкция по эксплуатации телеграмм-бота.
7. __requirements.txt__ - файл с зависимостями.

### Пакеты в корне проекта:
#### 1. settings:
* __init.py__ - инициализирует пакет settings и его содержимое.
* __constants.py__ - содержит константы, для общей смены текста в коде.
* __settings.py__ - подгружает переменные окружения, для работы бота.
#### 2. keyboards:
* __init.py__ - инициализирует пакет keyboards и его содержимое
* __keyboards.py__  - содержит все клавиатуры участвующие в проекте
* __key_text.py__ - содержит константы, для общей смены текста в кнопках клавиатуры.
#### 3. handlers:
* __init.py__ - инициализирует пакет handlers и его содержимое.
* __start.py__ - содержит хэндлеры для отлова команд бота.
* __echo.py__ - содержит хэндлер для отлова сообщений вне сценария.
#### 4. database:
* __init.py__ - инициализирует пакет database и его содержимое
* __models.py__ - содержит модели классов машины состояния.
* __database.py__ - содержит Класс БД и методы запросов к БД.
* __create_table__ - создаёт таблицы в БД.
* __insert_table__ - наполняет таблицы БД данными.
#### 5. config:
* __bot.conf__ - файл с конфигурациями супервизора.
#### 6. working:
* __logic__ - пакет со скриптами преобразования из txt файлов данных для записи в БД
* __Данные__ - директория с txt файлами, содержащая информацию по закупкам
* __init.py__ - инициализирует пакет working и его содержимое.
* __launcher.py__ - запускает скрипты пакета logic


### Команды бота:

* /start - Запуск бота
* /help — Поддержка

***
### Инструкция по эксплуатации:

Для запуска бота, Вам необходимо будет создать виртуальное окружение venv. Поместить токен-бота в переменную окружения (Файл .env).
Далее запускаем бота в файле main.py. Для отслеживания функционирования бота и возможных ошибок, ведётся логгирование, 
путём записи данных в файл error.log  (записывает только возникшие исключения). 
Параметры логгирования можно изменить в файле logging_config.py. По умолчанию в конфигурации логгера, логи в файле хранятся не более 24 часов.


***
### Инструкция по деплою приложения на linux debian/ubuntu (установка осуществляется после установки админ-панели django):

Логинимся: ssh <имя пользователя>@<ip-адрес сервера>

Активируем окружение: source venv/bin/activate

Клонируем проект с Вашего репозитория: git clone <адрес репозитория>

Переходим в папку проекта: cd <имя директории проекта>

Устанавливаем зависимости: pip install -r requirements.txt

Если возникнут проблемы с установкой, то дополнительно устанавливаем компиляции и повторяем установку зависимостей:

sudo apt-get install -y make build-essential libssl-dev zlib1g-dev

sudo apt-get install -y libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm

sudo apt-get install -y libncurses5-dev  libncursesw5-dev xz-utils tk-dev

Настраиваем supervisor (Переходим в директорию): cd /etc/supervisor/conf.d/

Добавляем в директорию ссылку на файл настроек supervisor: sudo ln <путь до файла>

Подтягиваем файл конфигурации supervisor: sudo supervisorctl reread

Добавляем данный файл в процесс: sudo supervisorctl update

Проверяем статус запущенных процессов: sudo supervisorctl status

Дополнительные команды:

Перезапуск процесса: sudo supervisorctl restart <имя проекта>

Остановка процесса: sudo supervisorctl stop <имя проекта>

Запуск процесса: sudo supervisorctl start <имя проекта>






